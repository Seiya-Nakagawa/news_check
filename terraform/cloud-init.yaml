#cloud-config
# Cloud-init設定: インスタンス初回起動時の最小限のセットアップ
# 詳細は Ansible で管理する方針に変更

users:
  - default
  - name: ${instance_user}
    gecos: News Check Admin
    groups: users, admin, docker
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    ssh_authorized_keys:
      - ${ssh_public_key}

# タイムゾーンをAsia/Tokyoに設定
runcmd:
  - timedatectl set-timezone Asia/Tokyo

# 最終メッセージ
final_message: |
  Cloud-init basic setup completed!
  User '${instance_user}' has been created.
  The instance is now ready to be configured by Ansible from your local machine (WSL).
  Please update ansible/inventory/hosts.yml with the public IP and run the playbook.
